<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>VillageCraft Connect  Authentic Handmade Crafts</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <style>
        /* ---------- RESET & TYPOGRAPHY ---------- */
        *, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#fafafa; color:#222; line-height:1.6; }
        a { text-decoration:none; color:inherit; }
        img { max-width:100%; display:block; }

        /* ---------- BACKGROUND IMAGES (BLURRED) ---------- */
        body::before {
            content:''; position:fixed; inset:0; z-index:-1;
            background: url('images/image1.jpg') top 5% left 8%/180px no-repeat,
                        url('./images/image17.jpg') bottom 10% right 5%/220px no-repeat,
                        url('./images/image3.jpg') center right 15%/150px no-repeat,
                        url('./images/image15.jpg') top 25% left 20%/250px no-repeat,
                        url('./images/image5.jpg') bottom 20% left 15%/190px no-repeat,
                        url('./images/image6.jpg') center left 5%/210px no-repeat,
                        url('./images/image7.jpg') top 15% right 10%/170px no-repeat,
                        url('./images/image8.jpg') bottom 5% left 50%/230px no-repeat,
                        url('./images/image9.jpg') top 40% right 30%/160px no-repeat,
                        url('./images/image10.jpg') bottom 30% left 35%/200px no-repeat,
                        #fff;
            filter: blur(2px); opacity:.25; background-attachment:fixed;
        }

        /* ---------- HEADER ---------- */
        header {
            position:fixed; top:0; left:50%; transform:translateX(-50%);
            width:100%; max-width:1200px; background:#fff; box-shadow:0 2px 12px rgba(0,0,0,.08);
            z-index:1000; display:flex; align-items:center; padding:12px 24px;
        }
        .logo { font-weight:800; font-size:1.4rem; color:#222; }
        nav { margin-left:auto; display:flex; gap:24px; align-items:center; }
        nav a { font-weight:500; color:#444; transition:color .2s; }
        nav a:hover { color:#49d8b9; }
        .header-right { display:flex; gap:16px; align-items:center; }
        .btn-primary { background:#49d8b9; color:#fff; padding:8px 16px; border-radius:6px; font-weight:600; }
        .btn-secondary { background:#222; color:#fff; padding:8px 16px; border-radius:6px; font-weight:600; }
        .icon-btn { font-size:1.2rem; color:#444; position:relative; cursor:pointer; }

        /* Cart Icon Badge */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* ---------- ARTISAN DASHBOARD ---------- */
        .dashboard {
            max-width: 1200px;
            margin: 100px auto 60px;
            padding: 0 24px;
            display: none;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #49d8b9;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .dashboard-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .dashboard-section h3 {
            margin-bottom: 20px;
            color: #333;
            border-bottom: 2px solid #49d8b9;
            padding-bottom: 8px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .order-info h4 {
            margin: 0 0 5px 0;
            color: #333;
        }

        .order-date {
            color: #666;
            font-size: 0.9rem;
        }

        .order-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-completed { background: #d4edda; color: #155724; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-processing { background: #cce7ff; color: #004085; }

        /* ---------- HERO ---------- */
        .hero {
            max-width:1200px; margin:100px auto 60px; padding:0 24px;
            display:grid; grid-template-columns:1fr 1fr; gap:40px; align-items:center;
        }
        .hero-text h1 { font-size:2.8rem; margin-bottom:16px; }
        .hero-text p { font-size:1.1rem; margin-bottom:24px; color:#555; }
        .hero-actions { display:flex; gap:16px; }
        .hero-img img { border-radius:12px; box-shadow:0 12px 24px rgba(0,0,0,.12); }

        /* ---------- SECTION TITLE ---------- */
        .section-title {
            text-align:center; font-size:2rem; margin:60px 0 40px; color:#222;
        }

        /* ---------- GROUPED CATEGORIES (YOUR EXACT LAYOUT) ---------- */
        .categories-wrapper {
            max-width:1200px; margin:0 auto 80px; padding:0 24px;
        }
        .category-group {
            margin-bottom:40px;
        }
        .group-title {
            font-size:1.6rem; color:#222; margin-bottom:16px;
            border-bottom:2px solid #49d8b9; padding-bottom:6px; width:fit-content;
        }
        .category {
            background:#fff; border-radius:16px; padding:20px; display:flex; align-items:center;
            gap:20px; box-shadow:0 6px 16px rgba(0,0,0,.08); cursor:pointer;
            transition:transform .3s, box-shadow .3s;
        }
        .category:hover {
            transform:translateY(-6px); box-shadow:0 12px 24px rgba(0,0,0,.15);
        }
        .category img {
            width:100px; height:100px; object-fit:cover; border-radius:12px; flex-shrink:0;
        }
        .category-info h2 {
            font-size:1.3rem; margin-bottom:6px; color:#222;
        }
        .category-info p {
            font-size:0.95rem; color:#666;
        }

        /* ---------- FEATURED PRODUCTS (UPDATED LAYOUT) ---------- */
        .featured {
            max-width:1200px; margin:0 auto 80px; padding:0 24px;
        }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        .product-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
        }
        .product-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
        }
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .product-info {
            padding: 1.5rem;
        }
        .product-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        .product-artisan {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }
        .product-description {
            color: #6b7280;
            margin-bottom: 1rem;
            line-height: 1.5;
            font-size: 0.95rem;
        }
        .product-tag {
            display: inline-block;
            background: #f3f4f6;
            color: #374151;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #059669;
            margin-bottom: 1rem;
        }
        .product-actions {
            display: flex;
            gap: 0.5rem;
        }
        .btn-primary {
            background: #2563eb;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }
        .btn-primary:hover {
            background: #1d4ed8;
        }
        .btn-secondary {
            background: #6b7280;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }
        .btn-secondary:hover {
            background: #4b5563;
        }

        /* ---------- ARTISANS ---------- */
        .artisans {
            max-width:1200px; margin:0 auto 80px; padding:0 24px;
            display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:32px;
        }
        .artisan-card {
            background:#fff; border-radius:16px; padding:24px; text-align:center;
            box-shadow:0 6px 16px rgba(0,0,0,.08);
        }
        .artisan-card img { width:120px; height:120px; border-radius:50%; margin:0 auto 16px; object-fit:cover; }
        .artisan-card h3 { font-size:1.3rem; margin-bottom:4px; }
        .artisan-card .location { font-size:.9rem; color:#888; margin-bottom:12px; }
        .artisan-card .tag { display:inline-block; background:#222; color:#fff; font-size:.75rem; padding:4px 10px; border-radius:20px; margin-bottom:12px; }
        .artisan-card p { font-size:.95rem; color:#555; margin-bottom:16px; }
        .artisan-card .btn-story { background:#49d8b9; color:#fff; padding:8px 16px; border-radius:6px; font-size:.9rem; }

        /* ---------- MODAL ---------- */
        .modal-overlay {
            display:none; position:fixed; inset:0; background:rgba(0,0,0,.7);
            justify-content:center; align-items:center; z-index:2000;
        }
        .modal-content {
            background:#fff; padding:32px; border-radius:16px; width:90%; max-width:380px;
            position:relative; animation:slideDown .3s ease-out;
        }
        .close-btn {
            position:absolute; top:12px; right:16px; font-size:1.5rem; color:#d9534f; cursor:pointer;
        }
        .close-btn:hover { color:#c9302c; }
        .modal-content h2 { margin-bottom:24px; text-align:center; }
        .input-group { margin-bottom:16px; }
        .input-group label { display:block; margin-bottom:6px; font-weight:600; }
        .input-group input, .input-group select {
            width:100%; padding:12px; border:1px solid #ddd; border-radius:8px;
        }
        .modal-button {
            width:100%; padding:12px; border:none; border-radius:8px; font-weight:600; cursor:pointer;
        }
        .error-message {
            color: #d9534f;
            background: #f8d7da;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-size: 14px;
            border: 1px solid #f5c6cb;
        }
        .success-message {
            color: #155724;
            background: #d4edda;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-size: 14px;
            border: 1px solid #c3e6cb;
        }
        body.modal-open { overflow: hidden; }
        #login-form .modal-button { background:#49d8b9; color:#fff; }
        #register-form .modal-button { background:#e8bc0e; color:#0e0f11; }

        /* ---------- ANIMATIONS ---------- */
        @keyframes slideDown { from { opacity:0; transform:translateY(-30px); } to { opacity:1; transform:none; } }

        /* ---------- RESPONSIVE ---------- */
        @media (max-width:900px){
            .hero { grid-template-columns:1fr; text-align:center; }
            .hero-actions { justify-content:center; }
            .category { flex-direction:column; text-align:center; }
            .category img { margin-bottom:12px; }
            .products-grid { grid-template-columns: 1fr; }
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<!-- ====================== HEADER ====================== -->
<header>
    <a href="index.html" class="logo">VillageCraft Connect</a>
    <nav>
        <a href="index.html">Home</a>
        <a href="#">Marketplace</a>
        <a href="videos.html">Videos & Tutorials</a>
        <a href="#">Courses</a>
        <a href="dashboard.html" class="btn-primary" onclick="showDashboard()">Artisan Dashboard</a>
    </nav>
    <div class="header-right">
        <a href="#" class="icon-btn" id="cartIcon">
            <i class="fas fa-shopping-cart"></i>
            <div class="cart-badge" id="cartCount">0</div>
        </a>
        <a href="#" class="btn-secondary" onclick="openModal('login')">Login</a>
        <a href="#" class="btn-primary" onclick="openModal('register')">Register</a>
    </div>
</header>

<!-- ====================== ARTISAN DASHBOARD ====================== -->
<div class="dashboard" id="dashboard">
    <h2 class="section-title">Artisan Dashboard</h2>
    
    <div class="dashboard-stats">
        <div class="stat-card">
            <div class="stat-number" id="totalSales">R0</div>
            <div class="stat-label">Total Sales</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="totalOrders">0</div>
            <div class="stat-label">Total Orders</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="completedOrders">0</div>
            <div class="stat-label">Completed Orders</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="pendingOrders">0</div>
            <div class="stat-label">Pending Orders</div>
        </div>
    </div>

    <div class="dashboard-section">
        <h3>Recent Orders</h3>
        <div id="recentOrders">
            <div class="empty-cart">
                <i class="fas fa-shopping-bag"></i>
                <p>No orders yet</p>
            </div>
        </div>
    </div>

    <div class="dashboard-section">
        <h3>Popular Products</h3>
        <div id="popularProducts">
            <div class="empty-cart">
                <i class="fas fa-chart-line"></i>
                <p>No product data available</p>
            </div>
        </div>
    </div>
</div>

<!-- ====================== HERO ====================== -->
<section class="hero" id="heroSection">
    <div class="hero-text">
        <h1>Discover Authentic Handmade Crafts</h1>
        <p>Connect directly with skilled artisans from rural India. Every purchase supports traditional craftsmanship and empowers local communities.</p>
        <div class="hero-actions">
            <a href="index.html" class="btn-primary">Explore Marketplace</a>
            <a href="videos.html" class="btn-secondary">Watch Tutorials</a>
        </div>
    </div>
    <div class="hero-img">
        <img src="images/ceramic21.jpg" alt="Handmade ceramic cups">
    </div>
</section>

<div id="welcome-banner" style="display:none; background:#e8f9f5; padding:16px; margin:16px auto; max-width:800px; border-radius:12px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,.08);">
    <!-- Filled by JS -->
</div>

<!-- ====================== GROUPED CATEGORIES ====================== -->
<h2 class="section-title">Browse by Category</h2>
<div class="categories-wrapper">
    <div class="categories">
        <!-- Pottery & Clay Crafts -->
        <div class="category-group">
            <h2 class="group-title">Pottery & Clay Crafts</h2>
            <div class="category" onclick="goToCategory('water-usage')">
                <img src="images/water7.jpg" alt="Water Usage Pottery" />
                <div class="category-info">
                    <h2>Water Usage Vessels</h2>
                    <p>Products focused on water conservation and storage. (Maker's Story Included)</p>
                </div>
            </div>
            <div class="category" onclick="goToCategory('kitchen-usage')">
                <img src="images/kitchen18.jpg" alt="Kitchen Usage Pottery" />
                <div class="category-info">
                    <h2>Handcrafted Kitchenware</h2>
                    <p>Handcrafted kitchen essentials and tools. (Browse & Learn Feature)</p>
                </div>
            </div>
        </div>

        <!-- Jute & Fibre Crafts -->
        <div class="category-group">
            <h2 class="group-title">Jute & Fibre Crafts</h2>
            <div class="category" onclick="goToCategory('jute-products')">
                <img src="images/jute11.jpg" alt="Eco-friendly Jute Products" />
                <div class="category-info">
                    <h2>Eco-friendly Jute Products</h2>
                    <p>Sustainable jute goods for everyday use. (Video Showcase Available)</p>
                </div>
            </div>
        </div>

        <!-- Ceramic & Stoneware -->
        <div class="category-group">
            <h2 class="group-title">Ceramic & Stoneware</h2>
            <div class="category" onclick="goToCategory('ceramic-products')">
                <img src="images/ceramic24.jpg" alt="Artistic Ceramic Products" />
                <div class="category-info">
                    <h2>Artistic Ceramic Products</h2>
                    <p>Beautiful ceramic items crafted with care and expert design guidance.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ====================== FEATURED PRODUCTS ====================== -->
<h2 class="section-title">Featured Products</h2>
<div class="featured">
    <div class="products-grid">
        <!-- Product 1 -->
        <div class="product-card">
            <div class="product-image">
                <img src="images/jute13.jpg" alt="Traditional Ceramic Bowl">
            </div>
            <div class="product-info">
                <h3 class="product-title">Traditional Ceramic Bowl</h3>
                <div class="product-artisan">by Aylun Patel</div>
                <p class="product-description">Traditional handcrafted ceramic bowl featuring intricate blue and white patterns inspired by ancient pottery techniques.</p>
                <span class="product-tag">ceramic-products</span>
                <div class="product-price">R320</div>
                <div class="product-actions">
                    <button class="btn-secondary">View Details</button>
                    <button class="btn-primary" onclick="universalCart.addToCart('Traditional Ceramic Bowl', 320, 'jute9.jpg')">Add to Cart</button>
                </div>
            </div>
        </div>

        <!-- Product 2 -->
        <div class="product-card">
            <div class="product-image">
                <img src="images/ceramic19.jpg" alt="Elegant Ceramic Vase">
            </div>
            <div class="product-info">
                <h3 class="product-title">Elegant Ceramic Vase</h3>
                <div class="product-artisan">by Ravi Verma</div>
                <p class="product-description">Elegant ceramic vase with hand-painted floral motifs, showcasing the artisan's mastery in glazing techniques.</p>
                <span class="product-tag">ceramic-products</span>
                <div class="product-price">R450</div>
                <div class="product-actions">
                    <button class="btn-secondary">View Details</button>
                    <button class="btn-primary" onclick="universalCart.addToCart('Elegant Ceramic Vase', 450, 'ceramic15.jpg')">Add to Cart</button>
                </div>
            </div>
        </div>

        <!-- Product 3 -->
        <div class="product-card">
            <div class="product-image">
                <img src="images/jute16.jpg" alt="Ceramic Dinner Plate Set">
            </div>
            <div class="product-info">
                <h3 class="product-title">Ceramic Dinner Plate Set</h3>
                <div class="product-artisan">by Meera Devi</div>
                <p class="product-description">Handmade ceramic dinner plate set with earthy tones perfect for everyday dining.</p>
                <span class="product-tag">ceramic-products</span>
                <div class="product-price">R580</div>
                <div class="product-actions">
                    <button class="btn-secondary">View Details</button>
                    <button class="btn-primary" onclick="universalCart.addToCart('Ceramic Dinner Plate Set', 580, 'jute16.jpg')">Add to Cart</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ====================== MEET OUR ARTISANS ====================== -->
<h2 class="section-title">Meet Our Artisans</h2>
<div class="artisans">
    <div class="artisan-card">
        <img src="rajesh.jpg" alt="Rajesh Kumar">
        <h3>Rajesh Kumar</h3>
        <div class="location">Khujra, Uttar Pradesh</div>
        <span class="tag">pottery</span>
        <p>Born into a family of potters, Rajesh learned the art from his father at age 12. He has dedicated his life to preserving the ancient techniques of Khujra pottery while innovating with contemporary designs. His work has been exhibited in galleries across India and...</p>
        <a href="#" class="btn-story">Read Story</a>
    </div>

    <div class="artisan-card">
        <img src="meera.jpg" alt="Meera Devi">
        <h3>Meera Devi</h3>
        <div class="location">Kumartuli, West Bengal</div>
        <span class="tag">ceramic</span>
        <p>Meera comes from the famous Kumartuli artisan community where clay sculpture is a centuries-old tradition. She was one of the first women in her community to establish her own workshop. Her durga idols are sought after during festival seasons and her work continu...</p>
        <a href="#" class="btn-story">Read Story</a>
    </div>
</div>

<!-- ====================== MODALS ====================== -->
<div id="login-modal" class="modal-overlay">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('login')">X</span>
        <h2>Log In</h2>
        <form id="login-form">
            <div class="input-group">
                <label for="login-email">Email / Username</label>
                <input type="text" id="login-email" required>
            </div>
            <div class="input-group">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" required>
            </div>
            <button type="submit" class="modal-button">Log In</button>
            <p style="margin-top:15px; text-align:center;">
                <a onclick="switchModal('register')" style="color:#49d8b9; cursor:pointer;">New user? Register here.</a>
            </p>
        </form>
    </div>
</div>

<div id="register-modal" class="modal-overlay">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('register')">X</span>
        <h2>Create Account</h2>
        <form id="register-form">
            <div class="input-group">
                <label for="reg-type">I am a...</label>
                <select id="reg-type" required>
                    <option value="">-- Select --</option>
                    <option value="artisan">Rural Artisan</option>
                    <option value="buyer">Client/Buyer</option>
                </select>
            </div>
            <div class="input-group">
                <label for="reg-name">Full Name</label>
                <input type="text" id="reg-name" required>
            </div>
            <div class="input-group">
                <label for="reg-email">Email Address</label>
                <input type="email" id="reg-email" required>
            </div>
            <div class="input-group">
                <label for="reg-password">Password</label>
                <input type="password" id="reg-password" required>
            </div>
            <button type="submit" class="modal-button">Register Now</button>
            <p style="margin-top:15px; text-align:center;">
                <a onclick="switchModal('login')" style="color:#49d8b9; cursor:pointer;">Already a member? Log in.</a>
            </p>
        </form>
    </div>
</div>

<!-- ====================== SCRIPTS ====================== -->
<script src="cart.js"></script>
<script>
    // Enhanced login/logout functionality
    function handleLogin(email, name, type) {
        localStorage.setItem('vcc_isLoggedIn', 'true');
        localStorage.setItem('vcc_userEmail', email);
        localStorage.setItem('vcc_userName', name);
        localStorage.setItem('vcc_userType', type);
        
        // Initialize user's cart after login
        universalCart.initializeUserCart();
        
        alert('Login successful!');
        closeModal('login');
        location.reload();
    }

    function handleRegister(type, name, email, password) {
        localStorage.setItem('vcc_isLoggedIn', 'true');
        localStorage.setItem('vcc_userEmail', email);
        localStorage.setItem('vcc_userName', name);
        localStorage.setItem('vcc_userType', type);
        
        // Initialize user's cart after registration
        universalCart.initializeUserCart();
        
        alert('Registration successful!');
        closeModal('register');
        location.reload();
    }

    // Modal control functions
    function openModal(type) {
        document.getElementById(type + '-modal').style.display = 'flex';
    }

    function closeModal(type) {
        document.getElementById(type + '-modal').style.display = 'none';
    }

    function switchModal(to) {
        closeModal(to === 'register' ? 'login' : 'register');
        openModal(to);
    }

    // Close modal when clicking outside
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) overlay.style.display = 'none';
        });
    });

    // Enhanced Login/Register form handling
    document.addEventListener('DOMContentLoaded', function() {
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        
        if (loginForm) {
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                if (email && password) {
                    handleLogin(email, email.split('@')[0], 'buyer');
                } else {
                    alert('Please fill in all fields');
                }
            });
        }

        if (registerForm) {
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const type = document.getElementById('reg-type').value;
                const name = document.getElementById('reg-name').value;
                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                
                if (type && name && email && password) {
                    handleRegister(type, name, email, password);
                } else {
                    alert('Please fill in all fields');
                }
            });
        }

        // Check if user is logged in on page load
        const isLoggedIn = localStorage.getItem('vcc_isLoggedIn') === 'true';
        if (isLoggedIn) {
            // Cart will be automatically loaded by universalCart
            console.log('User is logged in, cart loaded');
        }
    });

    // Add login required overlay to product cards
    function addLoginOverlays() {
        const productCards = document.querySelectorAll('.product-card');
        productCards.forEach(card => {
            const isLoggedIn = localStorage.getItem('vcc_isLoggedIn') === 'true';
            if (!isLoggedIn) {
                const overlay = document.createElement('div');
                overlay.className = 'login-required-overlay';
                overlay.innerHTML = `
                    <i class="fas fa-lock"></i>
                    <p>Login to add to cart</p>
                    <button class="btn-primary" onclick="openModal('login')">Login Now</button>
                `;
                card.style.position = 'relative';
                card.appendChild(overlay);
            }
        });
    }

    // Initialize login overlays
    document.addEventListener('DOMContentLoaded', addLoginOverlays);
</script>
<script>
    // Redirect mapping
    const categoryPages = {
        'water-usage': 'index1.html',
        'kitchen-usage': 'index2.html',
        'jute-products': 'index3.html',
        'ceramic-products': 'index4.html'
    };

    function goToCategory(cat) {
        const isLoggedIn = localStorage.getItem('vcc_isLoggedIn') === 'true';
        if (!isLoggedIn) {
            alert('You must be logged in to access this category.');
            openModal('login');
            return;
        }
        const targetPage = categoryPages[cat] || 'index.html';
        window.location.href = targetPage;
    }

    // Modal control
    function openModal(type) {
        document.getElementById(type + '-modal').style.display = 'flex';
    }
    function closeModal(type) {
        document.getElementById(type + '-modal').style.display = 'none';
    }
    function switchModal(to) {
        closeModal(to === 'register' ? 'login' : 'register');
        openModal(to);
    }
 
    // Close modal on outside click
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) overlay.style.display = 'none';
        });
    });

    // Artisan Dashboard Functions
    function showDashboard() {
        const isLoggedIn = localStorage.getItem('vcc_isLoggedIn') === 'true';
        if (!isLoggedIn) {
            alert('Please login to access the dashboard');
            openModal('login');
            return;
        }

        // Hide main content and show dashboard
        document.getElementById('heroSection').style.display = 'none';
        document.querySelector('.categories-wrapper').style.display = 'none';
        document.querySelector('.featured').style.display = 'none';
        document.querySelector('.artisans').style.display = 'none';
        document.querySelectorAll('.section-title').forEach(el => el.style.display = 'none');
        
        document.getElementById('dashboard').style.display = 'block';
        loadDashboardData();
    }

    function loadDashboardData() {
        // Load orders from localStorage
        const orders = JSON.parse(localStorage.getItem('vcc_orders')) || [];
        const recentOrders = document.getElementById('recentOrders');
        
        // Calculate stats
        const totalSales = orders.reduce((sum, order) => sum + order.total, 0);
        const totalOrders = orders.length;
        const completedOrders = orders.filter(order => order.status === 'completed').length;
        const pendingOrders = orders.filter(order => order.status === 'pending').length;

        // Update stats
        document.getElementById('totalSales').textContent = `R${totalSales}`;
        document.getElementById('totalOrders').textContent = totalOrders;
        document.getElementById('completedOrders').textContent = completedOrders;
        document.getElementById('pendingOrders').textContent = pendingOrders;

        // Display recent orders
        if (orders.length === 0) {
            recentOrders.innerHTML = `
                <div class="empty-cart">
                    <i class="fas fa-shopping-bag"></i>
                    <p>No orders yet</p>
                </div>
            `;
        } else {
            let ordersHTML = '';
            orders.slice(-5).reverse().forEach(order => {
                ordersHTML += `
                    <div class="order-item">
                        <div class="order-info">
                            <h4>Order #${order.id}</h4>
                            <div class="order-date">${new Date(order.date).toLocaleDateString()}</div>
                            <div>${order.items.length} items - R${order.total}</div>
                        </div>
                        <span class="order-status status-${order.status}">${order.status}</span>
                    </div>
                `;
            });
            recentOrders.innerHTML = ordersHTML;
        }

        // Calculate popular products
        const allOrders = orders.flatMap(order => order.items);
        const productCount = {};
        allOrders.forEach(item => {
            productCount[item.name] = (productCount[item.name] || 0) + item.quantity;
        });

        const popularProducts = document.getElementById('popularProducts');
        const sortedProducts = Object.entries(productCount).sort((a, b) => b[1] - a[1]).slice(0, 5);

        if (sortedProducts.length === 0) {
            popularProducts.innerHTML = `
                <div class="empty-cart">
                    <i class="fas fa-chart-line"></i>
                    <p>No product data available</p>
                </div>
            `;
        } else {
            let productsHTML = '';
            sortedProducts.forEach(([product, count]) => {
                productsHTML += `
                    <div class="order-item">
                        <div class="order-info">
                            <h4>${product}</h4>
                            <div>Sold: ${count} units</div>
                        </div>
                    </div>
                `;
            });
            popularProducts.innerHTML = productsHTML;
        }
    }

    // Sample order data for demonstration
    function initializeSampleData() {
        if (!localStorage.getItem('vcc_orders')) {
            const sampleOrders = [
                {
                    id: 'VC-001',
                    date: '2024-01-15',
                    items: [
                        { name: 'Traditional Ceramic Bowl', price: 320, quantity: 2 },
                        { name: 'Elegant Ceramic Vase', price: 450, quantity: 1 }
                    ],
                    total: 1090,
                    status: 'completed'
                },
                {
                    id: 'VC-002',
                    date: '2024-01-18',
                    items: [
                        { name: 'Ceramic Dinner Plate Set', price: 580, quantity: 1 }
                    ],
                    total: 580,
                    status: 'processing'
                }
            ];
            localStorage.setItem('vcc_orders', JSON.stringify(sampleOrders));
        }
    }

    // Initialize sample data on first load
    initializeSampleData();

    // Login/Register form handling
    document.getElementById('login-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        
        // Simple login validation
        if (email && password) {
            localStorage.setItem('vcc_isLoggedIn', 'true');
            localStorage.setItem('vcc_userEmail', email);
            alert('Login successful!');
            closeModal('login');
            location.reload();
        } else {
            alert('Please fill in all fields');
        }
    });

    document.getElementById('register-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const type = document.getElementById('reg-type').value;
        const name = document.getElementById('reg-name').value;
        const email = document.getElementById('reg-email').value;
        const password = document.getElementById('reg-password').value;
        
        if (type && name && email && password) {
            localStorage.setItem('vcc_isLoggedIn', 'true');
            localStorage.setItem('vcc_userEmail', email);
            localStorage.setItem('vcc_userType', type);
            localStorage.setItem('vcc_userName', name);
            alert('Registration successful!');
            closeModal('register');
            location.reload();
        } else {
            alert('Please fill in all fields');
        }
    });

    // Check login status on page load
    document.addEventListener('DOMContentLoaded', function() {
        const isLoggedIn = localStorage.getItem('vcc_isLoggedIn') === 'true';
        if (isLoggedIn) {
            const userName = localStorage.getItem('vcc_userName') || 'User';
            document.getElementById('welcome-banner').style.display = 'block';
            document.getElementById('welcome-banner').innerHTML = `
                <h3>Welcome back, ${userName}!</h3>
                <p>Ready to continue your craft journey?</p>
            `;
        }
    });
</script>

</body>
</html>
